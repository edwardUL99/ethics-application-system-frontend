<div>
  <app-navbar></app-navbar> 
  <div *ngIf="!loadError; else displayError">
    <div *ngIf="application; else loading" class="container">
      <div class="card shadow text-center my-5 p-3">
        <div class="text-end">
          <p><b>Application ID:</b> {{application?.applicationId}}</p>
        </div>
        <div class="text-start">
          <p class="application-text"><b>Applicant:</b> {{application?.user?.name}}</p>
          <p class="application-text"><b>Application Status:</b> {{application?.status}}</p>
          <p class="application-text"><b>Last Updated:</b> {{getLastUpdatedDate()}}</p>
        </div>
      </div>
      <div style="color: white;" class="text-center">
        <h4>Application Form</h4>
      </div>
      <app-application-template-display [application]="application"
      (questionChange)="questionChange($event)" (autoSave)="autoSave($event)"></app-application-template-display>
      <app-alert #saveAlert [alertType]="'alert-success'" [message]="'Saved'"
      [dismissible]="true" [hidden]="true" class="text-center"></app-alert>
      <app-alert *ngIf="saveError" [alertType]="'alert-danger'" [message]="saveError" [dismissible]="true"></app-alert>
      <div class="card shadow px-3 py-2">
        <div class="d-inline text-end">
          <button type="button" class="btn btn-secondary" *ngIf="showSaveButton()" (click)="save()">Save</button>
          <button type="button" class="btn btn-primary" style="margin-left: 1%" [disabled]="!templateView?.form.valid" (click)="submit()">Submit</button> 
        </div>
      </div>
    </div>
    <ng-template #loading>
      <app-loading></app-loading>
    </ng-template> 
  </div>
  <ng-template #displayError>
    <div class="container">
      <app-alert [alertType]="'alert-danger'" [message]="loadError"></app-alert>
    </div>
  </ng-template>
</div>
