<div>
  <div *ngIf="requestInput" class="mt-3">
    <hr class="w-100">
    <div class="d-inline">
      <div class="text-end">
        <button type="button" class="btn btn-sm btn-outline-secondary" *ngIf="requestedUsername" (click)="reset()" [appTooltip]="'Cancel the request'">Cancel</button>
        <button type="button" class="btn btn-sm btn-secondary margin-left-1" (click)="fillAnswer()" [appTooltip]="'Answer the question yourself'">Answer</button>
        <button type="button" class="btn btn-sm btn-primary margin-left-1" (click)="requestAnswer()" [appTooltip]="'Request input from another user'">Request Answer</button>
      </div>
    </div>
    <div class="my-1">
      <p style="color: grey">This field has been marked as requiring input from another user. You can request the user to answer it or choose to manually answer it</p>
    </div>
    <div *ngIf="displayForm">
      <form [formGroup]="form">
        <div class="form-group">
          <label>Username:</label>
          <input type="text" class="form-control" name="username" formControlName="username">
          <app-field-error [condition]="username.errors?.['required'] && username.touched" [error]="'This field is required'"></app-field-error>
          <app-field-error [condition]="username.errors?.['userExists'] && username.touched" [error]="username.errors?.['userExists']"></app-field-error>
          <app-field-error [condition]="username.errors?.['username'] && username.touched" [error]="'Enter a valid username or UL email address'"></app-field-error>
          <app-field-error [condition]="username.errors?.['sameUser'] && username.touched" [error]="'You cannot request an answer from yourself'"></app-field-error>
          <div class="form-text">
            The username or e-mail address of the user to request an answer from
          </div>
        </div>
        <div class="text-end">
          <button type="button" class="btn btn-primary" (click)="submit()" [disabled]="!form.valid">Submit</button>
        </div>
      </form>
    </div>
  </div>
  <app-alert #requestAlert [dismissible]="true" [hidden]="true"></app-alert>
</div>
